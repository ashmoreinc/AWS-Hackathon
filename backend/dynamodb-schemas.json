{
  "Offers": {
    "TableName": "Offers",
    "KeySchema": [
      {
        "AttributeName": "PK",
        "KeyType": "HASH"
      },
      {
        "AttributeName": "SK",
        "KeyType": "RANGE"
      }
    ],
    "AttributeDefinitions": [
      {
        "AttributeName": "PK",
        "AttributeType": "S"
      },
      {
        "AttributeName": "SK",
        "AttributeType": "S"
      }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "StreamSpecification": {
      "StreamEnabled": true,
      "StreamViewType": "NEW_AND_OLD_IMAGES"
    },
    "TimeToLiveSpecification": {
      "Enabled": true,
      "AttributeName": "expiration_timestamp"
    },
    "Schema": {
      "PK": "OFFER#{offer_id}",
      "SK": "METADATA",
      "offer_id": "string - unique identifier",
      "offer_name": "string - display name (e.g., Starbucks Coffee, Amazon Prime Deal)",
      "offer_type": "string - high_street | online",
      "discount_type": "string - PERCENTAGE | FIXED_AMOUNT",
      "discount_value": "number - discount amount or percentage",
      "priority": "number - 1-100, higher = more important",
      "inventory_count": "number - available redemptions",
      "expiration_timestamp": "number - Unix epoch (TTL enabled)",
      "created_at": "number - Unix epoch",
      "status": "string - ACTIVE | PAUSED | EXPIRED"
    },
    "AccessPatterns": {
      "GetActiveOffers": "Scan with FilterExpression: status = ACTIVE AND inventory_count > 0",
      "GetOfferById": "GetItem with PK = OFFER#{offer_id}, SK = METADATA"
    }
  },
  "UserActivity": {
    "TableName": "UserActivity",
    "KeySchema": [
      {
        "AttributeName": "PK",
        "KeyType": "HASH"
      },
      {
        "AttributeName": "SK",
        "KeyType": "RANGE"
      }
    ],
    "AttributeDefinitions": [
      {
        "AttributeName": "PK",
        "AttributeType": "S"
      },
      {
        "AttributeName": "SK",
        "AttributeType": "S"
      }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "Schema": {
      "PK": "USER#{user_id}",
      "SK": "PROFILE | ACTIVITY#{timestamp}#{event_type}#{event_id}",
      "Patterns": {
        "UserProfile": {
          "PK": "USER#{user_id}",
          "SK": "PROFILE",
          "user_id": "string - unique identifier",
          "connection_type": "string - wifi | mobile",
          "created_at": "number - Unix epoch"
        },
        "ActivityEvent": {
          "PK": "USER#{user_id}",
          "SK": "ACTIVITY#{timestamp}#{event_type}#{event_id}",
          "activity_type": "string - CLICK | VIEW | REDEMPTION | ADD_TO_CART | DISMISS",
          "timestamp": "number - Unix epoch",
          "offer_id": "string - reference to offer",
          "offer_type": "string - high_street | online",
          "event_type": "string - CLICK | VIEW | REDEMPTION | ADD_TO_CART | DISMISS"
        }
      }
    },
    "AccessPatterns": {
      "GetUserProfile": "GetItem with PK = USER#{user_id}, SK = PROFILE",
      "GetUserActivity": "Query with PK = USER#{user_id}, SK begins_with ACTIVITY"
    }
  },
  "BusinessLogic": {
    "OfferRanking": {
      "Description": "Simple location-based targeting",
      "Rules": [
        "WiFi connection → Prioritize online offers (+50 priority boost)",
        "Mobile connection → Prioritize high_street offers (+50 priority boost)"
      ],
      "Formula": "final_score = base_priority + connection_type_boost",
      "Example": {
        "User": "USER001 with WiFi",
        "Offer1": "Amazon Prime (online, priority 95) → Score: 145",
        "Offer2": "Starbucks (high_street, priority 90) → Score: 90",
        "Result": "Amazon Prime shown first"
      }
    }
  }
}
